package api.test;import api.endpoint.EndpointForm;import api.endpoint.RouterBookingCare;import api.ultis.ApiProvinceInfor;import api.ultis.SlackNotificationUltis;import com.google.gson.JsonArray;import com.google.gson.JsonElement;import com.google.gson.JsonObject;import com.google.gson.JsonParser;import io.restassured.response.Response;import org.testng.annotations.Test;import java.util.Iterator;public class LocationProvinceTest {    private static int countNumberTinhThanh(JsonArray array, String key) {        int count = 0;        Iterator check = array.iterator();        while (check.hasNext()) {            JsonElement element = (JsonElement) check.next();            JsonObject object = element.getAsJsonObject();            if (object.has(key)) {                ++count;            }        }        return count;    }    @Test(description = "API Tỉnh Thành: Kiểm tra dữ liệu trả về")    private static void checkDataApiTinhThanh() {        Response response = EndpointForm.listTinhThanh();        JsonObject jsonObject = JsonParser.parseString(response.asString()).getAsJsonObject();        JsonArray dulieuArray = jsonObject.getAsJsonArray("dulieu");        if (dulieuArray.isEmpty()) {            SlackNotificationUltis.sendSlackNotification("APITinhThanh khong co du lieu tra ve");        }    }    @Test(description = "API Tỉnh Thành: Kiểm tra dữ liệu trả có đủ 63 tỉnh thành")    private static void checkDataHas63TinhThanh() {        Response response = EndpointForm.listTinhThanh();        JsonObject jsonObject = JsonParser.parseString(response.asString()).getAsJsonObject();        JsonArray dulieuArray = jsonObject.getAsJsonArray("dulieu");        int count = countNumberTinhThanh(dulieuArray, "ma");        if (count != 63) {            SlackNotificationUltis.sendSlackNotification("[ERROR] APITinhThanh khong du 63 du lieu tra ve");        }    }    @Test(description = "API Tỉnh Thành: Kiểm tra dữ liệu trả kết quả mong muốn với mã =1")    private static void checkDataMaHaNoi() {        String baseURI = RouterBookingCare.TINHTHANH_URL;        ApiProvinceInfor adressInfor = new ApiProvinceInfor(baseURI);        String ma = adressInfor.getDuLieuMa("Thành phố Hà Nội");        if (!"1".equals(ma)) {            SlackNotificationUltis.sendSlackNotification("ERROR khong tim ID voi ten = Thành phố Hà Nội");        }    }}