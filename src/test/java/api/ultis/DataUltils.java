package api.ultis;import api.endpoint.EndpointForm;import api.endpoint.RouterBookingCare;import io.restassured.RestAssured;import io.restassured.path.json.JsonPath;import io.restassured.response.Response;import io.restassured.specification.RequestSpecification;import java.util.*;public class DataUltils implements HeaderApi {    static String MA_TINH_THANH;    static String MA_QUAN_HUYEN;    private static String getRandomMaFromList(List<Map<String, String>> dataList) {        List<String> randomMaList = new ArrayList<>();        for (Map<String, String> data : dataList) {            randomMaList.add(data.get("ma"));        }        if (!randomMaList.isEmpty()) {            Random random = new Random();            int randomIndex = random.nextInt(randomMaList.size());            return randomMaList.get(randomIndex);        } else {            System.out.println("List is null");            return null;        }    }    private static List<Map<String, String>> getDuLieuFromResponse(Response response) {        Map<String, List<Map<String, String>>> duLieuMap = JsonPath.from(response.asString()).get();        List<Map<String, String>> duLieuList = duLieuMap.get("dulieu");        if (duLieuList == null) {            return List.of(Map.of("ma", "", "ten", "", "url", ""));        }        return duLieuList;    }    private static String getDataTinhThanh() {        Response response = EndpointForm.listTinhThanh();        List<Map<String, String>> duLieu = getDuLieuFromResponse(response);        return getRandomMaFromList(duLieu);    }    public static String getDataQuanHuyen(String maTinhThanh) {        Response response = EndpointForm.listQuanHuyen(maTinhThanh);        List<Map<String, String>> duLieu = getDuLieuFromResponse(response);        return getRandomMaFromList(duLieu);    }    public static String getDataPhuongXa(String maQuanHuyen) {        Response response = EndpointForm.listPhuongXa(maQuanHuyen);        List<Map<String, String>> duLieu = getDuLieuFromResponse(response);        return getRandomMaFromList(duLieu);    }    public static String getDataPhuongXaNoValue() {        Response response = EndpointForm.listPhuongXa(getIdQuanHuyen());        List<Map<String, String>> duLieu = getDuLieuFromResponse(response);        return getRandomMaFromList(duLieu);    }    public static String getDataQuanHuyenNoValue() {        Response response = EndpointForm.listQuanHuyen(getIdTinhThanh());        List<Map<String, String>> duLieu = getDuLieuFromResponse(response);        return getRandomMaFromList(duLieu);    }    public static String getIdTinhThanh() {        MA_TINH_THANH = getDataTinhThanh();        return MA_TINH_THANH;    }    public static String getIdQuanHuyen() {        MA_QUAN_HUYEN = getDataQuanHuyen(MA_TINH_THANH);        return MA_QUAN_HUYEN;    }    public static RequestSpecification builderRequest() {        String maTinhThanh = getDataTinhThanh();        String pageUrl = RouterBookingCare.BASE_URL;        RequestSpecification request = RestAssured.given();        request.baseUri(pageUrl);        request.param("tinhthanh", maTinhThanh).toString();        request.param("dt", "96").toString();        String endpoint = RouterBookingCare.ENDPOINT_QUANHUYEN_URL;        request.basePath(endpoint);        request.header(deafautLHeader);        return request;    }}